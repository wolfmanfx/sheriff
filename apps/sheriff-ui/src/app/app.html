<div class="flex flex-col gap-4 items-start p-4 w-full">
  <section class="w-full">
    <h2>Config (sheriff.config.ts)</h2>
    @if (store.missingConfig()) {
    <div class="mb-2 text-red-700">
      No sheriff.config.ts found in current folder.
    </div>
    }
    <div class="flex gap-2 items-center mb-2">
      <label>Root:</label>
      <code>{{ store.cwd() }}</code>
      <button class="btn" (click)="checkFolder()">Reload</button>
    </div>
    <label for="configText">Config content</label>
    <app-code-editor class="h-[500px]" [value]="store.config()" (valueChange)="store.setConfig($event)"></app-code-editor>
    <div class="mt-2 flex gap-2">
      <button class="btn" (click)="saveConfig()">Save</button>
      <button class="btn btn-secondary" (click)="initDefaultConfig()">Create default config</button>
    </div>
  </section>

  <section class="w-full min-w-[320px]">
    <h2>Analyze</h2>
    <div class="flex gap-2 items-center">
      <label for="entry">Entry file:</label>
      <input id="entry" type="text" [value]="store.entry()" (input)="onEntryInput($event)" placeholder="src/main.ts" />
      <button class="btn btn-secondary" (click)="analyzeMerged()">Run (merged)</button>
    </div>

    <app-org-chart-diagram class="w-full" [tree]="mergedTree()"></app-org-chart-diagram>

  </section>
</div>
